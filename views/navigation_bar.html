<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="/">
               <img id="rearseat_icon" src="img/rearseat_png.png" height="35">
            </a>
            <a href="/">
                <p id="title" class="navbar-text">RearSeat</p>
            </a>
        </div>
        <div class="navbar-right">
            {% if user['id'] == null %}
                <button id="btn_login" type="button" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#login_modal">Login</button>
                <button id="btn_signup" type="button" class="btn btn-primary navbar-btn" data-toggle="modal" data-target="#signup_modal">Sign up</button>

                <!-- 登入視窗 -->
                <div class="modal fade" id="login_modal" tabindex="-1" role="dialog" aria-labelledby="login_modal_title" aria-hidden="true">
                    <div class="modal-dialog modal-sm">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">
                                    <span aria-hidden="true">&times;</span>
                                    <span class="sr-only">Close</span>
                                </button>
                                <h4 class="modal-title" id="login_modal_title">Login</h4>
                            </div>
                            <form method="post" action="login.php">
                                <div class="modal-body">    
                                    <input type="email" class="form-control" name="email" placeholder="Email" required><br>
                                    <input type="password" class="form-control" name="password" placeholder="Password" required>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Login</button>
                                </div>
                            </form> 
                        </div>
                    </div>
                </div>

                <!-- 註冊視窗 -->
                <div class="modal fade" id="signup_modal" tabindex="-1" role="dialog" aria-labelledby="signup_modal_title" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">
                                    <span aria-hidden="true">&times;</span>
                                    <span class="sr-only">Close</span>
                                </button>
                                <h4 class="modal-title" id="signup_modal_title">Sign up</h4>
                            </div>
                            <form name="signup_form" class="form-horizontal" method="post" action="signup.php" onsubmit="return inputCheck()">
                                <div class="modal-body">
                                    <div id="signup_message"></div>    
                                    <div class="form-group">
                                        <label for="signup_mail" class="col-sm-2 control-label">學校信箱</label>
                                        <div class="col-sm-7">
                                            <input name="email" onchange="checkEmail()" type="email" class="form-control" id="signup_mail" placeholder="studentNumber@mail.nknu.edu.tw" required>
                                        </div>
                                        <div id="mail_check">
                                            <span class="glyphicon glyphicon-exclamation-sign col-sm-1 check_icon check_unknow" aria-hidden="true"></span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="signup_pw" class="col-sm-2 control-label">密碼</label>
                                        <div class="col-sm-7">
                                            <input name="password" onchange="checkPassword()" type="password" class="form-control" id="signup_pw" placeholder="長度至少6個字元" pattern=".{6,}" required title="長度至少6個字元">
                                        </div>
                                        <div id="pw_check">                                        
                                            <span class="glyphicon glyphicon-exclamation-sign col-sm-1 check_icon check_unknow" aria-hidden="true"></span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="signup_pw_check" class="col-sm-2 control-label">確認密碼</label>
                                        <div class="col-sm-7">
                                            <input name="password_repeat" type="password" onchange="checkPasswordRepeat()" class="form-control" id="signup_pw_check" placeholder="請再輸入一次密碼" required>
                                        </div>
                                        <div id="pwr_check">   
                                            <span class="glyphicon glyphicon-exclamation-sign col-sm-1 check_icon check_unknow" aria-hidden="true"></span>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group">
                                        <label for="signup_name" class="col-sm-2 control-label">姓名</label>
                                        <div class="col-sm-7">
                                            <input name="name" type="text" class="form-control" id="signup_name" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="signup_sex" class="col-sm-2 control-label">性別</label>
                                        <div class="col-sm-7 radio_sex">
                                            <input name="sex" type="radio" class="radio_sex_child" value="0" required>男
                                            <input name="sex" type="radio" class="radio_sex_child" value="1">女
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="signup_dep" class="col-sm-2 control-label">系級</label>
                                        <div class="col-sm-7">
                                            <input name="department" type="text" class="form-control" id="signup_dep" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="signup_phone" class="col-sm-2 control-label">手機</label>
                                        <div class="col-sm-7">
                                            <input name="phone" type="text" class="form-control" id="signup_phone" required>
                                        </div>
                                    </div>                                    
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Sign up</button>
                                </div>
                            </form> 
                        </div>
                    </div>
                </div>
            {% else %}
                <ul class="nav navbar-nav">
                    <li style="cursor: pointer"><a href="new_request.php">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New Request
                    </a></li>
                    <li style="cursor: pointer;" id="user">
                        <div class="dropdown">
                            <div class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                                {% if user['photo'] == null %}
                                <img id="user_icon" src='{{ "data:image/png;base64, " ~ user["photo"] }}' height="35">
                                {% else %}
                                <img id="user_icon" src='img/no_photo.jpg' height="35">
                                {% endif %}
                                <span class="caret"></span>
                            </div>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                <li role="presentation">
                                    <a href="profile.php" role="menuitem" class="dropdown_item">My Profile</a>
                                </li>
                                <li role="presentation">
                                    <a href="my_request.php" role="menuitem" class="dropdown_item">Request</a>
                                </li>
                                <li role="presentation">
                                    <a href="history.php" role="menuitem" class="dropdown_item">RearSeat History</a>
                                </li>
                                <li role="presentation">
                                    <a href="logout.php" role="menuitem" class="dropdown_item">Logout</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>   
            {% endif %}
        </div>
    </div>

</nav>